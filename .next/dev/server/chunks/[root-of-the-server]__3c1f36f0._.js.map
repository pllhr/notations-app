{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/ROCKETSEAT%20UPAR%20DROPBOX/ANALISE%20DE%20DADOS/notations/app/api/sieve/route.ts"],"sourcesContent":["// app/api/sieve/route.ts\r\nimport { NextResponse } from 'next/server';\r\n\r\nconst SIEVE_API_URL = 'https://mango.sievedata.com/v2';\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const { functionName, inputs } = await request.json();\r\n\r\n        // 1. Enviar tarefa para a Sieve\r\n        const response = await fetch(`${SIEVE_API_URL}/push`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-API-Key': process.env.SIEVE_API_KEY!, // Pega do servidor, seguro\r\n            },\r\n            body: JSON.stringify({\r\n                function: functionName, // Ex: \"sieve/stable-diffusion-xl\"\r\n                inputs: inputs,\r\n            }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const error = await response.json();\r\n            return NextResponse.json(error, { status: response.status });\r\n        }\r\n\r\n        const data = await response.json();\r\n        // A Sieve retorna um ID do trabalho (job id)\r\n        return NextResponse.json(data);\r\n\r\n    } catch (error) {\r\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n\r\n// Rota para checar o status (Polling)\r\nexport async function GET(request: Request) {\r\n    const { searchParams } = new URL(request.url);\r\n    const jobId = searchParams.get('jobId');\r\n\r\n    if (!jobId) return NextResponse.json({ error: 'Job ID required' }, { status: 400 });\r\n\r\n    const response = await fetch(`${SIEVE_API_URL}/jobs/${jobId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'X-API-Key': process.env.SIEVE_API_KEY!,\r\n        },\r\n    });\r\n\r\n    const data = await response.json();\r\n    return NextResponse.json(data);\r\n}"],"names":[],"mappings":"AAAA,yBAAyB;;;;;;;AACzB;;AAEA,MAAM,gBAAgB;AAEf,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEnD,gCAAgC;QAChC,MAAM,WAAW,MAAM,MAAM,GAAG,cAAc,KAAK,CAAC,EAAE;YAClD,QAAQ;YACR,SAAS;gBACL,gBAAgB;gBAChB,aAAa,QAAQ,GAAG,CAAC,aAAa;YAC1C;YACA,MAAM,KAAK,SAAS,CAAC;gBACjB,UAAU;gBACV,QAAQ;YACZ;QACJ;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,QAAQ,MAAM,SAAS,IAAI;YACjC,OAAO,gJAAY,CAAC,IAAI,CAAC,OAAO;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAC9D;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,6CAA6C;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;IAE7B,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ;AAGO,eAAe,IAAI,OAAgB;IACtC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC;IAE/B,IAAI,CAAC,OAAO,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAkB,GAAG;QAAE,QAAQ;IAAI;IAEjF,MAAM,WAAW,MAAM,MAAM,GAAG,cAAc,MAAM,EAAE,OAAO,EAAE;QAC3D,QAAQ;QACR,SAAS;YACL,aAAa,QAAQ,GAAG,CAAC,aAAa;QAC1C;IACJ;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC7B"}}]
}